<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz de Probabilidade</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        .option-btn {
            transition: all 0.3s ease;
        }
        .option-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .selected {
            background-color: #fbbf24 !important; /* amber-400 */
            color: #1f2937 !important; /* gray-800 */
            border-color: #f59e0b !important; /* amber-500 */
        }
        .correct {
            background-color: #34d399 !important; /* emerald-400 */
            color: white !important;
            border-color: #10b981 !important; /* emerald-500 */
        }
        .incorrect {
            background-color: #f87171 !important; /* red-400 */
            color: white !important;
            border-color: #ef4444 !important; /* red-500 */
        }
        .hide {
            display: none;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-500 via-pink-500 to-orange-500 min-h-screen flex items-center justify-center p-4">

    <div id="quiz-container" class="w-full max-w-2xl bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl p-6 sm:p-8 text-gray-800">

        <!-- Tela de Configuração Inicial -->
        <div id="setup-screen">
            <h1 class="text-3xl sm:text-4xl font-bold text-center mb-2 text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600">Quiz de Probabilidade</h1>
            <p class="text-center text-gray-600 mb-8">Escolha quantas perguntas você quer responder.</p>
            <div class="flex flex-col sm:flex-row justify-center gap-4">
                <button onclick="startQuiz(5)" class="w-full sm:w-auto bg-sky-500 text-white font-bold py-3 px-8 rounded-lg text-lg hover:bg-sky-600 transition-transform transform hover:scale-105 shadow-lg">5 Perguntas</button>
                <button onclick="startQuiz(10)" class="w-full sm:w-auto bg-emerald-500 text-white font-bold py-3 px-8 rounded-lg text-lg hover:bg-emerald-600 transition-transform transform hover:scale-105 shadow-lg">10 Perguntas</button>
                <button onclick="startQuiz(15)" class="w-full sm:w-auto bg-amber-500 text-white font-bold py-3 px-8 rounded-lg text-lg hover:bg-amber-600 transition-transform transform hover:scale-105 shadow-lg">15 Perguntas</button>
            </div>
        </div>

        <!-- Tela do Quiz -->
        <div id="quiz-screen" class="hide">
            <div class="mb-6">
                <div class="flex justify-between items-center mb-2">
                    <p id="question-counter" class="text-sm font-semibold text-purple-700"></p>
                    <p id="score-display" class="text-sm font-semibold text-emerald-700"></p>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2.5">
                    <div id="progress-bar" class="bg-gradient-to-r from-purple-500 to-pink-500 h-2.5 rounded-full transition-all duration-300"></div>
                </div>
            </div>
            <h2 id="question-text" class="text-xl sm:text-2xl font-semibold mb-6 text-center min-h-[80px]"></h2>
            <div id="options-container" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <!-- Opções serão inseridas aqui via JS -->
            </div>
            <div class="mt-8 text-center">
                <button id="next-button" onclick="nextQuestion()" class="bg-gray-800 text-white font-bold py-3 px-12 rounded-lg text-lg hover:bg-gray-900 transition-transform transform hover:scale-105 shadow-lg w-full sm:w-auto">Próxima</button>
            </div>
        </div>

        <!-- Tela de Resultados -->
        <div id="results-screen" class="hide text-center">
            <h1 class="text-3xl sm:text-4xl font-bold text-center mb-2 text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-pink-600">Quiz Finalizado!</h1>
            <p id="final-score" class="text-xl text-gray-700 my-6"></p>
            <p id="final-message" class="text-lg text-gray-600 mb-8"></p>
            <button onclick="restartQuiz()" class="bg-purple-600 text-white font-bold py-3 px-8 rounded-lg text-lg hover:bg-purple-700 transition-transform transform hover:scale-105 shadow-lg">Tentar Novamente</button>
        </div>

    </div>

    <script>
        // Banco de perguntas
        const allQuestions = [
            {
                question: "Qual é a probabilidade de tirar um número par ao lançar um dado de seis faces?",
                options: ["1/6", "1/3", "1/2", "2/3"],
                answer: "1/2"
            },
            {
                question: "Ao lançar uma moeda duas vezes, qual a probabilidade de obter 'cara' em ambos os lançamentos?",
                options: ["1/4", "1/3", "1/2", "3/4"],
                answer: "1/4"
            },
            {
                question: "Em um baralho de 52 cartas, qual a probabilidade de tirar um Ás?",
                options: ["1/52", "4/13", "1/26", "1/13"],
                answer: "1/13"
            },
            {
                question: "Uma urna contém 3 bolas vermelhas e 5 bolas azuis. Qual a probabilidade de tirar uma bola vermelha?",
                options: ["3/5", "3/8", "5/8", "1/3"],
                answer: "3/8"
            },
            {
                question: "Se a probabilidade de um evento ocorrer é de 0.7, qual a probabilidade de ele não ocorrer?",
                options: ["0.3", "0.5", "0.7", "1.0"],
                answer: "0.3"
            },
            {
                question: "Qual a probabilidade de tirar um 7 ou um Valete de um baralho de 52 cartas?",
                options: ["1/13", "2/13", "4/52", "1/26"],
                answer: "2/13"
            },
            {
                question: "Lançando dois dados, qual a probabilidade de a soma dos números ser igual a 7?",
                options: ["1/36", "1/12", "1/6", "5/36"],
                answer: "1/6"
            },
            {
                question: "Numa caixa há 10 canetas, das quais 4 estão sem tinta. Qual a probabilidade de pegar uma caneta que funciona?",
                options: ["2/5", "3/5", "1/10", "4/5"],
                answer: "3/5"
            },
            {
                question: "Se você escolher uma letra aleatoriamente da palavra 'PROBABILIDADE', qual a probabilidade de ser a letra 'B'?",
                options: ["1/13", "2/13", "1/12", "3/13"],
                answer: "2/13"
            },
            {
                question: "A probabilidade de um evento impossível é:",
                options: ["0", "1", "0.5", "-1"],
                answer: "0"
            },
            {
                question: "A probabilidade de um evento certo é:",
                options: ["0", "1", "0.5", "100"],
                answer: "1"
            },
            {
                question: "Em um grupo de 20 pessoas, 12 são mulheres. Qual a probabilidade de escolher um homem aleatoriamente?",
                options: ["12/20", "8/12", "2/5", "3/5"],
                answer: "2/5"
            },
            {
                question: "Ao lançar uma moeda, qual o espaço amostral?",
                options: ["{Cara}", "{Coroa}", "{Cara, Coroa}", "{Nenhuma das opções}"],
                answer: "{Cara, Coroa}"
            },
            {
                question: "Qual a probabilidade de tirar um número maior que 4 em um dado de seis faces?",
                options: ["1/6", "1/3", "1/2", "2/3"],
                answer: "1/3"
            },
            {
                question: "Uma sacola tem 5 bolas verdes e 7 amarelas. Se duas bolas são retiradas sem reposição, qual a probabilidade de ambas serem verdes?",
                options: ["20/144", "25/144", "5/33", "10/132"],
                answer: "5/33"
            },
            {
                question: "Qual a probabilidade de tirar uma carta de ouros de um baralho de 52 cartas?",
                options: ["1/2", "1/4", "1/13", "1/52"],
                answer: "1/4"
            }
        ];

        let currentQuestions = [];
        let score = 0;
        let currentQuestionIndex = 0;
        let selectedOption = null;

        const setupScreen = document.getElementById('setup-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultsScreen = document.getElementById('results-screen');
        
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const nextButton = document.getElementById('next-button');
        const questionCounter = document.getElementById('question-counter');
        const scoreDisplay = document.getElementById('score-display');
        const progressBar = document.getElementById('progress-bar');
        const finalScoreText = document.getElementById('final-score');
        const finalMessageText = document.getElementById('final-message');

        function startQuiz(numQuestions) {
            score = 0;
            currentQuestionIndex = 0;
            // Embaralha e seleciona o número de perguntas
            currentQuestions = allQuestions.sort(() => 0.5 - Math.random()).slice(0, numQuestions);
            
            setupScreen.classList.add('hide');
            resultsScreen.classList.add('hide');
            quizScreen.classList.remove('hide');

            showQuestion();
        }

        function showQuestion() {
            resetState();
            const question = currentQuestions[currentQuestionIndex];
            questionText.textContent = question.question;
            
            question.options.forEach(option => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('option-btn', 'w-full', 'p-4', 'border-2', 'rounded-lg', 'bg-white', 'hover:bg-amber-200', 'border-amber-300');
                button.addEventListener('click', selectOption);
                optionsContainer.appendChild(button);
            });
            
            updateHeader();
        }
        
        function updateHeader() {
            questionCounter.textContent = `Pergunta ${currentQuestionIndex + 1} de ${currentQuestions.length}`;
            scoreDisplay.textContent = `Pontos: ${score}`;
            const progressPercentage = ((currentQuestionIndex) / currentQuestions.length) * 100;
            progressBar.style.width = `${progressPercentage}%`;
        }

        function resetState() {
            selectedOption = null;
            nextButton.disabled = true;
            nextButton.classList.add('opacity-50', 'cursor-not-allowed');
            nextButton.textContent = 'Próxima';
            while (optionsContainer.firstChild) {
                optionsContainer.removeChild(optionsContainer.firstChild);
            }
        }

        function selectOption(e) {
            const selectedButton = e.target;
            
            // Permite seleção apenas se a resposta ainda não foi checada
            if (nextButton.textContent === 'Próxima') {
                Array.from(optionsContainer.children).forEach(button => {
                    button.classList.remove('selected');
                });
                selectedButton.classList.add('selected');
                selectedOption = selectedButton;
                nextButton.disabled = false;
                nextButton.classList.remove('opacity-50', 'cursor-not-allowed');
                nextButton.textContent = 'Confirmar Resposta';
            }
        }
        
        function nextQuestion() {
            if (nextButton.textContent === 'Confirmar Resposta') {
                checkAnswer();
            } else {
                 currentQuestionIndex++;
                if (currentQuestionIndex < currentQuestions.length) {
                    showQuestion();
                } else {
                    showResults();
                }
            }
        }

        function checkAnswer() {
            const question = currentQuestions[currentQuestionIndex];
            const isCorrect = selectedOption.textContent === question.answer;

            if (isCorrect) {
                score++;
                selectedOption.classList.add('correct');
                selectedOption.classList.remove('selected');
            } else {
                selectedOption.classList.add('incorrect');
                selectedOption.classList.remove('selected');
                // Mostra a resposta correta
                 Array.from(optionsContainer.children).forEach(button => {
                    if (button.textContent === question.answer) {
                        button.classList.add('correct');
                    }
                });
            }
            
            // Desabilita todas as opções
            Array.from(optionsContainer.children).forEach(button => button.style.pointerEvents = 'none');
            
            scoreDisplay.textContent = `Pontos: ${score}`;
            nextButton.textContent = 'Próxima';
            
            // Atualiza a barra de progresso para a pergunta atual
             const progressPercentage = ((currentQuestionIndex + 1) / currentQuestions.length) * 100;
            progressBar.style.width = `${progressPercentage}%`;
        }

        function showResults() {
            quizScreen.classList.add('hide');
            resultsScreen.classList.remove('hide');
            
            const percentage = Math.round((score / currentQuestions.length) * 100);
            finalScoreText.textContent = `Você acertou ${score} de ${currentQuestions.length} perguntas! (${percentage}%)`;

            let message = '';
            if (percentage === 100) {
                message = "Incrível! Você é um mestre da probabilidade!";
            } else if (percentage >= 70) {
                message = "Muito bem! Seu conhecimento em probabilidade é sólido.";
            } else if (percentage >= 50) {
                message = "Bom trabalho! Continue praticando para melhorar ainda mais.";
            } else {
                message = "Não desanime! Revisar os conceitos pode te ajudar a acertar mais da próxima vez.";
            }
            finalMessageText.textContent = message;
        }

        function restartQuiz() {
            resultsScreen.classList.add('hide');
            setupScreen.classList.remove('hide');
        }

    </script>
</body>
</html>
